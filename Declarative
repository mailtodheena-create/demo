// Jenkinsfile (Declarative Pipeline)
pipeline {
    agent any 
	tools {
	  maven 'Maven_home'
	}
    stages {
        stage('GIT Checkout') { 
            steps { 
                echo 'Check out ' 
				git branch: 'main', credentialsId: 'GIT-MAILTODHEENA-CREDENTIALS', url: 'https://github.com/mailtodheena-create/uob-app.git'
            }
        }

		 stage('Maven Clean') { 
            steps { 
                echo 'Maven Clean' 
				sh 'mvn clean'
            }
        }
		
		stage('Maven Build') { 
            steps { 
                echo 'MAven Build Starts....'
				echo 'Maven Version....'
				echo '$(mvn --version)'
				echo 'Java Version....'	
				echo '$(java --version)'
				sh 'mvn compile'
            }
        }
		stage('Copy The Jar to UAT Server') { 
            steps { 
                echo 'Copy the Jar....'
				sh 'scp /var/lib/jenkins/workspace/SaiPipleline/target/my-app-1.0-SNAPSHOT.jar ec2-user@3.80.44.90:/tmp/'
				echo 'Copied....'
            }
        }

		stage('Code Deploy') { 
            steps { 
                echo 'Hello World from Stage 3' 
				sh 'mvn package'
            }
        }
    }
}
